<div class="eventJoin">
	<div class="wrap-location">
		<h1 class="title"><span id="pageTitleSpan">참여정보 상세</span></h1>
		<span class="location"></span>
	</div>
  <div class="fb__sect eventJoin__content">
    <form id="inputForm" name="inputForm">

      <!-- ================================================================ -->
      <!-- 이벤트 정보 Start -->
      <div>
        <div class="tableTitle">
          <p class="form-wrapper__caption">이벤트 정보</p>
        </div>

        <!-- 이벤트 정보 테이블 -->
        <table class="datatable v-type eventInfo">
          <colgroup>
            <col width="15%" />
            <col width="35%" />
            <col width="15%" />
            <col width="35%" />
          </colgroup>
          <tbody>
            <tr>
              <th>
                <label>
                  이벤트 유형
                </label>
              </th>
              <td>
                <div class="complex-condition">
                  <span id="eventTpNmSpan"></span>
                </div>
              </td>
              <th>
                <label>
                  이벤트 명
                </label>
              </th>
              <td>
                <div class="complex-condition clearfix">
                  <span id="eventNmSpan"></span>
                  <button type="button" id="fnDetail" class="btn-white btn-s floatRight" onClick="$scope.fnBtnGoEdit();">이벤트 상세보기</button>
                </div>
              </td>
            </tr>
            <tr>
              <th>
                <label>
                  당첨자 설정
                </label>
              </th>
              <td>
                <div class="complex-condition">
                  <span id="eventDrawNmSpan"></span>
                </div>
              </td>
              <th>
                <label>
                  진행기간
                </label>
              </th>
              <td>
                <div class="complex-condition">
                  <p id="">
                    <span id="startDtSpan"></span>
                    <span class="marginR5 marginL5">~</span>
                    <span id="endDtSpan"></span>
                  </p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <!-- 이벤트 정보 테이블 End -->
      </div>
      <!-- 이벤트 정보 End -->
      <!-- ================================================================ -->

      <!-- ================================================================ -->
      <!-- 이벤트 참여자/당첨자 정보 Start -->
      <div>
        <div class="tableTitle">
          <p class="form-wrapper__caption">이벤트 참여자정보</p>
        </div>
        <!-- 이벤트 참여자 정보 테이블 영역 -->
        <div class="labelTabs">
          <ul class="labelTabs__list">
            <!--  참여자목록 Tab -->
            <li class="labelTabs__list__item">
              <label class="labelTabs__list__label">
                <input type="radio" name="tab" value="join" checked>
                <span class="labelTabs__list__name">참여자 목록</span>
              </label>
            </li>
            <!--  당첨자목록 Tab -->
            <li class="labelTabs__list__item">
              <label class="labelTabs__list__label">
                <input type="radio" name="tab" value="winner">
                <span class="labelTabs__list__name" >당첨자 목록</span>
              </label>
            </li>
          </ul>
        </div>

        <div class="grid-sect">

          <!-- 그리드 버튼 목록 -->
          <div class="clearfix marginB10">
            <div class="wrap-tit floatLeft" style="margin: 0;">
              <div class="ea-title">
                <h3>목록</h3>
              </div>
              <div class="ea-title">
                <span>총 <em id="totalCnt">0</em> 건 </span>
              </div>
            </div>

            <div class="wrap-tit floatRight" style="margin:0;">
            <div class="btn-area">
              <!-- <div id="gridHeader" class="marginR5" style="display: flex;"> -->
              <div id="gridHeader" class="marginR5 flexBox" style="display:none;">
                <!-- 임직원 제외 체크박스 -->
                <div class="complex-condition">
                  <div id="employeeExceptYn" name="employeeExceptYn" class="checkbox-wrapper fb__custom__checkbox"></div>
                </div>&nbsp;&nbsp;&nbsp;
                <!-- 이벤트 참여제한 고객 제외 체크박스 -->
                <div class="complex-condition">
                  <div id="eventJoinYn" name="eventJoinYn" class="checkbox-wrapper fb__custom__checkbox"></div>
                </div>&nbsp;&nbsp;&nbsp;
                <!-- 당첨자선택유형 -->
                <div class="fb__custom__select inlineBlock marginR5">
                  <input id="winnerSelectTp" name="winnerSelectTp"  class="fb__custom__select" type="text" style="width: 150px;">
                </div>
                <button type="button" id="fnBtnWinnerSelect" name="fnBtnWinnerSelect" class="btn-point btn-m" onclick="$scope.fnBtnWinnerSelect();">당첨자 선택</button>
              </div>
              <button type="button" id="" class="excel-btn btn-m marginR5" onclick="$scope.fnBtnExcelDownJoinList();">
                엑셀 다운로드
              </button>
              <!-- <button type="button" id="" class="btn-point btn-m" onclick="alert('이벤트 목록')">
                이벤트 목록
              </button> -->
            </div>
          </div>
          </div>

          <!-- ============================================================ -->
          <!-- 그리드 Start -->
          <div id="joinGrid" class="fb__grid"></div>
          <!-- 그리드 End -->
          <!-- ============================================================ -->

        </div>
        <!-- 이벤트 참여자 정보 테이블 영역 (일반) -->
      </div>
      <!-- 이벤트 참여자/당첨자 정보 End -->
      <!-- ================================================================ -->

      <!-- ================================================================ -->
      <!-- 이벤트 설문 통계 Start -->
      <div id="surveyDiv" style="display:none;">
        <div class="tableTitle">
          <p class="form-wrapper__caption">이벤트 설문 통계</p>
        </div>
        <div class="surveyList-wrapper">

          <!-- ============================================================ -->
          <!-- 설문 리스트 Start -->
          <ul id="surveyList" class="surveyList"></ul>
          <!-- 설문 리스트 End -->
          <!-- ============================================================ -->
        </div>
      </div>
      <!-- 이벤트 설문 통계 End -->
      <!-- ================================================================ -->

      <!-- button area -->
      <div class="btn-area">
        <button id="fnOk" type="button" class="btn-l btn-lightgray" onclick="$scope.fnBtnGoList();"><span id="fnOkSpan"></span></button>
      </div>
      <!-- button area End -->
    </form>
  </div>
</div>


<!-- ====================================================================== -->
<!-- Popup Strat -->
<div id="kendoPopup" style="display:none">

  <!-- 당첨자Popup Start -->
  <div id="winnerPopup" style="display:none">
    <div id="contents" class="pop-contents">
      <form id="inputWinnerForm" name="inputWinnerForm" method="post" onsubmit="return false;">
        <table class="datatable v-type">
          <colgroup>
            <col style="width:30%">
            <col style="width:70%">
          </colgroup>
          <tbody>
            <tr>
              <th><label for="winnerCnt"  class="req-star-front">혜택 구분</lavel></th>
              <td>
                <div class="complex-condition">
                  <div id="randomBenefitTp" name="randomBenefitTp" class="radios-wrapper fb__custom__radio"> </div>
                </div>
              </td>
            </tr>
            <tr>
              <th><label for="winnerCnt"  class="req-star-front">당첨인원</lavel></th>
              <td>
                <div id="benefit-single" style="display:none;">
                  <div class="complex-condition">
                    <input type="text" id="winnerCnt" name="winnerCnt" class="comm-input lengthCheck" maxlength="3" style="width:50%;" value="" placeholder="숫자만 입력" required>
                  </div>
                </div>
                <div id="benefit-differential" style="display:none;">
                  <div class="complex-condition">
                    <input type="text" id="benefitName1" name="benefitName" class="comm-input lengthCheck" maxlength="50" style="width:50%;" value="" placeholder="당첨혜택명" required>
                    <input type="text" id="winnerCnt1" name="winnerCnt" class="comm-input lengthCheck" maxlength="3" style="width:25%;margin-right:5px;margin-left:5px;" value="" placeholder="숫자만 입력" required>
                    <button type='button' class='btn-point btn-m' style="min-width:47px;" onclick="$scope.fnBenefitController('add',this)">+</button>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>

        <div class="btn-area">
          <button id="fnOk" type="button" class="btn-l btn-point" onclick="$scope.fnBtnWinnerSave();">등록</button>
          <button id="fnCancel" type="button" class="btn-l btn-white" onclick="$scope.fnPopupClose();">취소</button>
        </div>
      </form>
    </div>
  </div>
  <!-- 당첨자Popup End -->

  <!-- 설문 참여 Popup Start-->
  <div id="surveyJoinPopup" style="display:none">
    <div id="contents" class="pop-contents">
      <form id="inputSurveyForm" name="inputSurveyForm" method="post" onsubmit="return false;">
        <table class="datatable v-type surveyResponseTable">
          <colgroup>
            <col style="width:10%">
            <col style="width:40%">
            <col style="width:50%">
          </colgroup>
          <thead>
            <tr>
              <th>순번</th>
              <th>설문</th>
              <th>답변</th>
            </tr>
          </thead>
          <tbody id="surveyJoinList"></tbody>
        </table>
        <div class="btn-area">
          <button type="button" id="surveyJoinPopupClose" name="surveyJoinPopupClose" class="btn-white btn-l" onClick="$scope.fnPopupClose();">닫기</button>
        </div>
      </form>
    </div>
  </div>
  <!-- 설문 참여 Popup End -->

</div>
<!-- Popup End -->
<!-- ====================================================================== -->

<!-- ====================================================================== -->
<!-- Template Strat -->

<!-- ---------------------------------------------------------------------- -->
<!-- 설문 보기 템플릿 Start -->
<!-- 설문 보기 템플릿 -->
<script id="surveyListTpl" type="text/x-jquery-tmpl">
<li class="surveyList__item">
  <div class="surveyList__survey survey">
    <!-- 설문 제목 -->
    <p class="survey__title">
      <span class="survey__number">설문 ${evEventSurveyQuestionId}</span>
      <span class="survey__question">${title}</span>
    </p>
    <div class="survey__optionList-wrapper">
    <!-- 설문 보기 리스트 -->
    <ol class="survey__optionList">
    {{if eventSurveyItemList && eventSurveyItemList.length}}
      {{tmpl(eventSurveyItemList) "#surveyItemTpl"}}
    {{/if}}
    <ol>
    </div>
  </div>
</li>
</script>

<!-- 설문 보기 템플릿 -->
<script id="surveyItemTpl" type="text/x-jquery-tmpl">
  <li class="survey__option">
    <p class="survey__option__answer">
      <span class="survey__option__number">${evEventSurveyItemId}</span>
      <span class="survey__option__title">${item}</span>
      (<span class="survey__option__count">${itemSum}</span>
      <span>/</span>
      <span class="survey__option__ratio">${itemRate}</span><span class="unit">%</span>)
      <!-- 직접입력 목록다운로드 버튼 -->
      {{if directInputYn == 'Y'}}
        &nbsp;&nbsp;<button type="button" id="" class="excel-btn btn-s marginR5" onclick="$scope.fnBtnExcelDownDirectList('${evEventSurveyQuestionId}');">직접입력 목록다운로드</button>
      {{/if}}



    </p>
    <!-- 보기 이미지 -->
  {{if eventSurveyItemAttcList && eventSurveyItemAttcList.length}}
  <div class="survey__imageList">
    {{each(index2, attcItem) eventSurveyItemAttcList}}
        <div class="survey__image">
            <div class="fileUpload__imgWrapper" style="display: block;">
              <div class="fileUpload__img">
                  <button type="button" class="fileUpload__removeBtn">×</button>
                  <img data-name="" src="${$scope.fnImgUrlPath(attcItem.imgPath)}" onerror="$scope.handleImgError(this);" alt="'${attcItem.imgOriginNm}'">
                  <!--<img data-name="" src="${attcItem.imgPath}" onerror="$scope.handleImgError(this);" alt="'${attcItem.imgOriginNm}'">-->
              </div>
            </div>
        </div>
    {{/each}}
  </div>
  {{/if}}
  </li>
</script>

<!-- ---------------------------------------------------------------------- -->
<!-- 설문 참여 템플릿 Start -->
<script id="surveyJoinListTpl" type="text/x-jquery-tmpl">
  <tr>
  <td style="text-align: center; font-weight: bold;">
    ${sort}
  </td>
  <td>
    <p>${title}</p>
  </td>
  <td>
    <div>
      {{if eventSurveyItemList && eventSurveyItemList.length}}
      <ul class="surveyJoin__list">
        {{each(index, eventSurveyItem) eventSurveyItemList}}
          <li>
            <span class="surveyJoin__listTitle">* ${eventSurveyItem.item}</span>

            {{if eventSurveyItem.directInputYn != undefined && eventSurveyItem.directInputYn != null && eventSurveyItem.directInputYn == 'Y'}}
              &nbsp;(${eventSurveyItem.otherCmnt})
            {{/if}}
          </li>
        {{/each}}
      </ul>
      {{/if}}
    </div>
  </td>
  </tr>
</script>
<!-- 설문 참여 템플릿 End -->


<!-- ---------------------------------------------------------------------- -->

<!-- Template End -->
<!-- ====================================================================== -->




