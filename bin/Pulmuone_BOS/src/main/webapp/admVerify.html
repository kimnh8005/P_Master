<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>pulmuone Admin</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="contents/css/master.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="contents/css/operate.min.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="contents/css/dev.css" type="text/css" rel="stylesheet" />
	<style type="text/css">
		.k-dialog .k-dialog-buttongroup.k-dialog-button-layout-stretched,
		.k-overlay {
			width: 100%
		}

		.k-overlay {
			position: fixed;
			top: 0;
			left: 0;
			z-index: 10001;
			height: 100%;
			background-color: #000;
			filter: alpha(opacity=50);
			opacity: .5
		}

		.k-dialog.k-dialog-centered {
			top: 50%;
			left: 50%;
			-webkit-transform: translate(-50%, -50%);
			-ms-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%)
		}

		.k-dialog.k-window {
			position: fixed;
			padding-top: 0
		}

		div.k-window {
			display: inline-block;
			position: absolute;
			z-index: 10001;
			background: #fff;
			border-style: solid;
			border-width: 1px;
			padding-top: 2em
		}

		.k-dialog {
			min-width: 90px;
			min-height: 3em;
			max-width: 100%;
			max-height: 100%
		}

		.k-dialog .k-dialog-buttongroup {
			margin: 0;
			padding: 0
		}

		.k-dialog .k-window-titlebar {
			position: static;
			margin: 0;
			padding: .6em .8em 1em;
			width: auto
		}

		.k-window-titlebar {
			height: 24px !important;
			color: rgba(0, 0, 0, .75) !important;
			font-size: 17px !important;
			background: #f37e3c !important;
			font-weight: 700
		}

		.k-dialog .k-content {
			margin: 0;
			padding: 1.8em 1em;
			border-bottom-right-radius: 4px;
			border-bottom-left-radius: 4px
		}

		.k-block,
		.k-content,
		.k-grid,
		.k-header-column-menu,
		.k-panelbar,
		.k-slider,
		.k-splitter,
		.k-treeview,
		.k-widget {
			outline: 0;
			-webkit-tap-highlight-color: transparent
		}

		.k-animation-container,
		.k-animation-container *,
		.k-animation-container :after,
		.k-block .k-header,
		.k-list-container,
		.k-widget,
		.k-widget *,
		.k-widget :before {
			-webkit-box-sizing: content-box;
			box-sizing: content-box
		}

		.k-block {
			color: #2e2e2e
		}

		.k-content {
			background-color: #fff
		}

		.k-dialog .k-dialog-buttongroup.k-dialog-button-layout-stretched li.k-button:last-child {
			border-bottom-right-radius: 4px;
			border-right-width: 0
		}

		.k-dialog .k-dialog-buttongroup.k-dialog-button-layout-stretched li.k-button:first-child {
			border-bottom-left-radius: 4px;
			border-left-width: 0
		}

		.k-dialog .k-dialog-buttongroup.k-dialog-button-layout-stretched .k-button {
			display: inline-block;
			padding: 0;
			border-radius: 0;
			border-width: 1px 0 1px 1px
		}

		.k-button {
			display: inline-block;
			vertical-align: middle;
			font-family: inherit;
			line-height: 1.72em;
			text-align: center;
			cursor: pointer;
			text-decoration: none
		}

		body {
			background: #fbfbfb;
		}

		#document {
			/* max-width: 1920px; */
			max-width: 100%;
			min-height: 768px;
		}

		.loginForm-wrapper {
			position: relative;
			width: 100%;
			height: 100%;
		}



		.wrap-login-frm {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translateY(-50%);
			-webkit-transform: translateY(-50%);
			-moz-transform: translateY(-50%);
			width: 1024px;
			margin-left: -512px;
		}

		#login_frm {
			/* width: 300px;
			margin-top: 30px; */
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -70%);
			-webkit-transform: translate(-50%, -70%);
			-moz-transform: translate(-50%, -70%);
		}

		#login_frm [class|="input-area"] {
			display: block;
		}

		#login_frm [class|="input-area"]+[class|="input-area"] {
			margin: 10px 0;
		}

		#login_frm input[type="text"],
		#login_frm input[type="password"],
		#login_frm button {
			box-sizing: border-box;
			-webkit-box-sizing: border-box;
			-moz-box-sizing: border-box;
		}

		#login_frm input[type="text"],
		#login_frm input[type="password"] {
			padding: 0 20px;
			width: 100%;
			height: 50px;
			border: 1px solid #dadada;
			font-size: 14px;
		}

		#login_frm button {
			width: 100%;
			height: 50px;
			margin-top: 15px;
			background: #80c342;
			color: #fff;
			font-size: 16px;
		}

		.save-id {
			display: block;
			font-size: 15px;
			color: #000000;
		}

		.save-id>a {
			float: right;
		}

		.save-id:after {
			display: block;
			clear: both;
			content: "";
		}

		.cscenter {
			position: absolute;
			top: 70px;
			left: 340px;
			border-left: 1px solid #ddd;
			padding-left: 40px;
			line-height: 1.66;
			font-family: '맑은고딕', Malgun Gothic;
		}

		.cscenter dt {
			color: #333;
			font-size: 18px;
			font-weight: bold;
			line-height: 22px;
		}

		.cscenter dt:before {
			content: '';
			display: inline-block;
			width: 22px;
			height: 22px;
			margin-right: 8px;
			background: url('contents/images/login/admin_icon.png') no-repeat;
			vertical-align: top;
		}

		.cscenter dd {
			margin-top: 10px;
		}

		.cscenter dd strong {
			display: block;
			margin-bottom: 33px;
			color: #333;
			font-size: 34px;
			line-height: 1;
		}

		footer {
			position: absolute;
			bottom: 17px;
			left: 0;
			width: 100%;
			line-height: 1;
			text-align: center;
		}

		.wrap-layerpop {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
		}

		.wrap-layerpop:before {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: #000;
			opacity: 0.8;
			filter: alpha(opacity=80);
		}

		.layerpop-inner {
			position: absolute;
			top: 50%;
			left: 50%;
			width: 600px;
			height: 520px;
			margin: -260px 0 0 -300px;
			padding: 50px 30px;
			background: #fff;
			box-sizing: border-box;
		}

		.wrap-layerpop .layer-title2 {
			color: #333;
			font: 24px/1.1 "nanumM";
			font-weight: bold;
			text-align: center;
		}

		.wrap-layerpop .layer-desc {
			margin: 20px 0 0;
			color: #666;
			text-align: center;
		}

		.login-form-area {
			width: 400px;
			/* margin: 0 auto; */
			/* padding: 20px 0 0; */
		}

		.login-form input[type="text"],
		.login-form input[type="password"],
		.login-form input[type="number"] {
			display: block;
			width: 100%;
			height: 40px;
			border: 1px solid #e6e6e6;
			font-weight: bold;
		}

		.login-form input+input {
			margin: 5px 0 10px;
		}

		.login-form .txt-error {
			margin: 5px 0 15px;
		}

		.login_form-header {
			margin-bottom: 20px;
			width: 100%;
			overflow: hidden;
		}

		.login_form-header .img-wrapper,
		.login_form-header .title-wrapper {
			display: inline-block;
			height: 100%;
			vertical-align : middle;
		}

		.login_form-header .img-wrapper {}

		.img-wrapper figure {
			width : 144px;
		}

		.img-wrapper figure img {
			width : 100%;
		}

		.login_form-header .title-wrapper {
			margin-top : 1px;
			margin-left: 10px;
			font-weight: bold;
			/*vertical-align: bottom;*/
		}

		.title-wrapper__manager {
			font-size: 24px;
		}

		.title-wrapper__subtitle {
			font-size: 18px;
			color: #999999;
		}

		.checkbox-wrapper {
			display: inline-block;
			float: left;
			position: relative;
		}

		.checkbox-wrapper input[type="checkbox"] {
			display: none;
		}

		.checkbox-wrapper input[type="checkbox"]+span {
			padding-left: 30px;
			font-weight: bold;
		}

		.checkbox-wrapper input[type="checkbox"]+span:before {
			display: inline-block;
			position: absolute;
			top: 1px;
			left: 0;
			width: 20px;
			height: 20px;
			background-image: url(./contents/images/common/icon-unchecked.png);
			content: "";
		}

		.checkbox-wrapper input[type="checkbox"]:checked+span:before {
			background-image: url(./contents/images/common/icon-checked.png);
		}

		.txt-error {
			display: none;
			margin: 10px 0 15px;
			color: #c43b39;
			font-size: 12px;
			line-height: 1;
			font-weight: bold;
		}

		.area-error .txt-error {
			display: block;
		}

		.area-error .input-error {
			border-color: #ac2f33 !important;
		}

		.desc-form {
			margin: 6px 0 13px;
			font-size: 12px;
			line-height: 1.1;
		}

		.login-form-area .btn-area {
			display: block;
			margin-top: 26px;
			text-align: center;
		}

		.pw-change-area .btn-area a,
		.pw-change-area .btn-area button {
			height: 40px;
			line-height: 40px;
			font-size: 12px;
			color: #fff;
			font-weight: 600;
			margin: 0px;
		}

		.pw-change-area .btn-area .full-btn {
			width: 100%;
			background: #80c342;
		}

		.pw-change-area .btn-area .set-btn-type5 {
			display: block;
			margin-top: 5px;
			font-size: 0;
		}

		.pw-change-area .btn-area .set-btn-type5 button {
			display: inline-block;
			width: 197px;
			background: #666;
			font-size: 12px;
		}

		.pw-change-area .btn-area .set-btn-type5 button:first-child {
			margin-right: 5px;
		}

		.wrap-layerpop .btn-close {
			top: 10px;
			right: 10px;
			left: auto;
			width: 24px;
			height: 24px;
			background: url(contents/images/close.png) no-repeat;
		}

		/*신규 추가  20180808*/
		.wrap-layerpop2 {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
		}

		.wrap-layerpop2:before {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: #000;
			opacity: 0.8;
			filter: alpha(opacity=80);
		}

		.wrap-layerpop2 .layer-title2 {
			color: #333;
			font: 24px/1.1 "nanumM";
			font-weight: bold;
			text-align: center;
		}

		.wrap-layerpop2 .layer-desc {
			margin: 20px 0 0;
			color: #666;
			text-align: center;
		}

		.layerpop-inner2 {
			position: absolute;
			top: 50%;
			left: 50%;
			width: 600px;
			height: 500px;
			margin: -300px 0 0 -300px;
			padding: 100px 30px;
			background: #fff;
			box-sizing: border-box;
		}

		.layerpop-inner2 .btn-close {
			top: 5px;
			right: 5px;
			width: 24px;
			height: 24px;
			position: absolute;
			z-index: 1;
			background: url(contents/images/close.png) no-repeat;
		}

		.wrap-layerpop3 {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
		}

		.wrap-layerpop3:before {
			content: "";
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: #000;
			opacity: 0.8;
			filter: alpha(opacity=80);
		}

		.wrap-layerpop3 .layer-title2 {
			color: #333;
			font: 24px/1.1 "nanumM";
			font-weight: bold;
			text-align: center;
		}

		.wrap-layerpop3 .layer-desc {
			margin: 20px 0 0;
			color: #666;
			text-align: center;
		}
		#twofaForm{
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -70%);
			-webkit-transform: translate(-50%, -70%);
			-moz-transform: translate(-50%, -70%);
			width:300px;
		}
		#twofaForm h2{
			font-size:24px;
			margin-bottom:10px;
		}
		#twofaForm input{
			display: block;
			width: 100%;
			height: 40px;
			border: 1px solid #e6e6e6;
			font-weight: bold;
		}
		#twofaForm #twofactor{
			width: 100%;
			height: 50px;
			margin-top: 15px;
			background: #80c342;
			color: #fff;
			font-size: 16px;
		}
	</style>

	<script src="/js/lib/forbiz/password.js"></script>
	<script src="/js/lib/forbiz/sha256.js"></script>

</head>

<body>

	<article id="document">
		<!-- 로그인 -->
		<div id="loginForm" class="loginForm-wrapper" name="loginForm">
			<form name="login_frm" id="login_frm" onsubmit="return false">
				<div class="login_form-header">
					<div class="img-wrapper">
						<figure>
							<img src="./contents/images/login-logo.png" alt="logo.png" title="풀무원 로고">
						</figure>
					</div>
					<div class="title-wrapper">
						<p>
							<span class="title-wrapper__manager">관리자</span>
							<span class="title-wrapper__subtitle">Back Office System</span>
						</p>
					</div>
				</div>
				<div class="login-form-area">
					<div class="login-form area-error">
						<span class="input-area">
							<input type="text" name="ID" id="id" placeholder="아이디">
						</span>
						<p class="txt-error" id="loginMsg"></p>
						<span class="input-area">
							<input type="password" name="PW" id="pw" placeholder="비밀번호"
								onkeyup="if(event.keyCode == 13) $('#login_frm').submit();">
						</span>
						<p class="txt-error" id="pwMsg"></p>
						<div class="save-id">
							<label class="checkbox-wrapper" for="save-id">
								<input type="checkbox" id="save-id">
								<span>아이디 저장</span>
							</label>
							<a id="searchPw" href="admPwdReset.html">
								<strong>비밀번호 재설정</strong>
							</a>
						</div>
						<button id="login">로그인</button>
					</div>
				</div>

			</form>
		</div>

		<!-- 이차인증 시작 -->
		<div id="twofaForm" style="display:none">
			<h2> 관리자 이차인증</h2>
			<span class="input-area">
				<input type="number" name="authCertiNo" id="authCertiNo" placeholder="이차인증 6자리 코드 입력" maxlength="6" oninput="maxLengthCheck(this)">
			</span>
			<p class="txt-error" id="twofaMsg"></p>
			<button id="twofactor">확인</button>
		</div>
		<!-- 이차인증 종료 -->

		<!-- 비밀번호 변경 -->
		<div class="cscenter" id="pwdChangeForm" style="display:none">
			<font style="font-weight:bold;">관리자 비밀번호 재설정</font><br />
			<p id="changeTitle"></p><br />
			비밀번호 설정조건<br />
			<font color="red">- 최근 3개월이내 사용한 비밀번호 재설정 불가 </font><br />
			- 영문 대소문자/숫자/특수문자 중 3가지 조합 + 8자리 이상 필수<br />
			- 연속된 숫자, 아이디 이용 제한
			<form name="loginPwdChangeFrm" id="loginPwdChangeFrm" onsubmit="return false">
				<legend class="hidden">관리자 비밀번호 재설정</legend>
				<div class="login-form-area">
					<div class="login-form area-error">
						<!-- 현재 비밀번호
				<input id="nowPwd" type="password" placeholder="현재 비밀번호" title="현재 비밀번호 입력">
				<p class="txt-error" id="nowPwdMsg"></p> -->
						새 비밀번호
						<input id="newPwd" type="password" placeholder="새 비밀번호" title="새 비밀번호 입력">
						<p class="txt-error" id="newPwdMsg"></p>
						새 비밀번호 확인
						<input id="newPwdChk" type="password" placeholder="새 비밀번호 확인" title="새 비밀번호 재 입력">
						<p class="txt-error" id="newPwdChkMsg"></p>
					</div>
					<span class="btn-area">
						<button class="set-btn-type2 full-btn" onclick="fnPassWordChange()">확인</button>
					</span>
				</div>
			</form>
		</div>

		<!-- 비밀번호 변경 완료 -->
		<div class="cscenter" id="pwdFinishForm" style="display:none">
			관리자 비밀번호 <br />

			<div class="login-form-area">
				<div class="login-form area-error">
					임시 비밀번호가 메일로 발송되었습니다
				</div>
				<span class="btn-area">
					<button class="set-btn-type2 full-btn" onclick="fnGoLogin()">로그인</button>
				</span>
			</div>
			</form>
		</div>

		<footer>COPYRIGHT (C)2020 SHOP PULMUONE ALL RIGHT RESERVED.</footer>
	</article>
	<p id="forbizMessage"> </p>
</body>

</html>

<script src="js/lib/jquery/jquery.js"></script>
<script src="js/lib/jquery/jquery.validate.js"></script>
<!-- 3rd party libraries -->
<script src="js/lib/kendo/js/2020.1.219/kendo.all.min.js"></script>
<!-- script src="js/lib/kendo/js/kendo.core.min.js"></script -->
<!-- script src="js/lib/kendo/js/kendo.dialog.min.js"></script -->
<!-- script src="js/lib/kendo/js/kendo.all.min.js"></script -->
<script src="js/comn/comm.kendo.min.js"></script>
<script src="js/comn/comm.lang.min.js"></script>
<script src="js/comn/comn.js"></script>
<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script type="text/javascript">

	$.ajaxSetup({
		headers: { "X-CSRF": "ShopPulmuoneBos" }
	});

	var loginCheck = true;
	$(document).ready(function () {
		//로그인 체크
		$.ajax({
			url     :'/system/getSession',
			success :
			function( data ) {
				if(data.data.session) {
					// 2차 인증 여부에 따른 대시 보드 이동 처리
					if ((data.data.session.authCertiNo == null || data.data.session.authCertiNo == "") && data.data.session.authCertiFailCount < 5) {
						location.href="/layout.html#/dashboardTot";
					}
				}
			}
		});


		//쿠키
		$("#id").val(getCookie("userInputId"));
		$("input:checkbox[id='save-id']").prop("checked", getCookie("saveId"));

		$('#login').unbind().bind('click', function (e) {
			fnLogin();
		});
		$('#twofactor').unbind().bind('click', function (e) {
			fnTwoFactorAuth();
		});
		$('#id').off().on('keydown', function (e) {
			if (e.keyCode == 13) {
				if ($('#pw').val() == "") {
					$('#pw').focus();
				}
			}
		});

		//msg 처리
		$("#id").blur(function () {
			var checkId = fnValidationId($('#id').val());
			$("#loginMsg").text(checkId);
		});

		//비밀번호는 영문 대소문자/숫자/특수문자 만 가능
		fnInputValidationByRegexp("newPwd", /[^a-zA-Z0-9\{\}\[\]\/?.,;:|\)*~`!^\-_+┼<>@\#$%&\'\"\\\(\=]/g);

	});

	//login
	function fnLogin() {
		if ($('#id').val() == "") {
			$("#loginMsg").text('아이디를 입력해주세요.');
			return;
		}
		if ($('#pw').val() == "") {
			$("#pwMsg").text('비밀번호를 입력해주세요');
			return;
		}
		if (!loginCheck) {
			alert("로그인 처리중입니다..");
			return;
		}
		loginCheck = false;
		/*
		 fnAjax({
             url     : url,
             params  : paramData,
             success : function( successData ){
                         fnBizCallback(cbId, successData);
             },
             isAction : 'insert'
         });
		*/

		$.ajax({
			url: "/admin/login/hasLoginData",
			data: { "loginId": $('#id').val(), "password": $('#pw').val() },
			type: 'POST',
			dataType: 'json',
			error: function (xhr, status, strError) {
			},
			success:
				function (data) {
					$(".txt-error").text("");
					var chkVal = data.code;
					switch (chkVal) {
						case "0000":
							if ($("#save-id").is(":checked")) {
								setCookie("userInputId", $("#id").val(), 60, true); // 60일 동안 쿠키 보관
								setCookie("saveId", $("#save-id").is(":checked"), 60, true); // 60일 동안 쿠키 보관
							} else {
								deleteCookie("userInputId");
								deleteCookie("saveId");
							}

							if(data.data.twoFactorAuthYn == 'Y') {
								$("#loginForm").css("display", "none");
								$("#twofaForm").css("display", "block");
							} else {
								location.href = 'layout.html#/dashboardTot';
								loginCheck = false;
							}
							break;
						case "LOGIN_STATUS_TEMPORARY_STOP": //일시정지
							loginCheck = true;
							fnKendoMessage({
								message: data.message, ok: function () {
									$("#changeTitle").text("비밀번호 변경이 필요합니다");
									$("#loginForm").css("display", "none");
									$("#pwdChangeForm").css("display", "block");

									location.href = "admPwdReset.html";

									/* 20201124 v1.4 20201123 버전 반영
									$("#changeTitle").text("비밀번호 변경이 필요합니다");
									$("#loginForm").css("display", "none");
									$("#pwdChangeForm").css("display", "block");
									*/
								}
							});

							break;
						case "LOGIN_STATUS_ADMINISTRATIVE_LEAVE": //정지
							loginCheck = true;
							fnMessage(data.message);
							break;
						case "LOGIN_PASSWORD_CHANGE": //비밀번호 변경 필요
							loginCheck = true;
							$("#changeTitle").text("90일마다 관리자의 계정 비밀번호를 재 설정해주세요");
							$("#loginForm").css("display", "none");
							$("#pwdChangeForm").css("display", "block");

							break;
						case "LOGIN_TEMPORARY_PASSWORD": //임시비밀번호
							loginCheck = true;
							$("#changeTitle").text("비밀번호 변경이 필요합니다");
							$("#loginForm").css("display", "none");
							$("#pwdChangeForm").css("display", "block");

							break;

						default:
							loginCheck = true;
							fnMessage(data.message);
							break;
					}

				}
		});
	}

	//message
	function fnMessage(msg, type) {
		$("#forbizMessage").kendoDialog({
			closable: false,
			modal: true,
			minWidth: 400,
			title: 'Message',
			content: msg,
			actions: [{
				text: '확인', primary: true, action: function (e) {
					$("#forbizMessage").data("kendoDialog").close();
					fnKendoMessageInit();
				}
			}]
		});
	}
	function fnKendoMessageInit() {
		$('.k-dialog').remove();
		$('body').append('<div id="forbizMessage"></div>');
	}

	function fnMsgText(items) {
		/*
		var chkItem = ['id','pw']
		fnMsgText(chkItem);
		*/
		items.forEach(function (item) {
			if ($("#" + item).val() == "") {
				$("#" + item).text();
			}
		});

	}

	//id 체크
	function fnValidationId(idVal) {
		var rtnMsg = '';
		//if (idVal.length < 6) rtnMsg = '아이디는 최소 6자 이상 입력해 주세요.';
		return rtnMsg;
	}


	//비밀번호 변경
	function fnPassWordChange() {
		var msg = fnValidationPwd();
		if (msg != "") {
			$("#" + msg[0]).text(msg[1]);
			return;
		} else {
			$.ajax({
				url: "/admin/login/putPassWordByLogin",
				data: { "loginId": $('#id').val(), "password": $('#pw').val(), "newPassword": $('#newPwd').val()},
				type: 'POST',
				dataType: 'json',
				success:
					function (data) {
						$(".txt-error").text("");
						var chkVal = data.code;
						switch (chkVal) {
							case "0000":
								fnKendoMessage({
									message: '비밀번호가 변경되었습니다. 로그인 페이지로 이동합니다.', ok: function () {
										location.href = "/admVerify.html";
									}
								});
								/*
								$("#loginPwdChangeFrm")[0].reset();
								$("#pwdChangeForm").css("display", "none");
								$("#loginForm").css("display", "block");
								*/
								break;
							case "LOGIN_PASSWORD_CHANGE_FAIL":
								$("#newPwdChkMsg").text(data.message);
								break;
							default:
								fnMessage(data.message);
								break;
						}

					}
			});
		}


	}

	//비밀번호 변경 validation
	function fnValidationPwd() {
		$(".txt-error").text("");
		var msg = "";
		/*
				if($("#nowPwd").val() == '') {
					return ['nowPwdMsg', '현재 비밀번호를 입력해 주세요'];
				}*/
		if ($("#newPwd").val() == '') {
			return ['newPwdMsg', '새 비밀번호를 입력해 주세요.'];
		}
		//현재 비밀번호와 새 비밀번호 체크
		if ($("#pw").val() == $("#newPwd").val()) {
			return ['newPwdMsg', '이미 사용했던 비밀번호 입니다. 새로운 비밀번호를 입력해주세요.'];
		}
		//비밀번호 유효성(id 이용제한)
		if ($("#newPwd").val().indexOf($('#id').val()) > -1 ||
			!fnCheckContinuous3Character($("#newPwd").val()) || //연속된 숫자, 문자 입력시
			!fnCheckPwdPattern($("#newPwd").val())) {

			return ['newPwdMsg', '비밀번호 입력조건에 어긋납니다, 조건확인 후 다시 입력해주세요.'];
		}

		if ($("#newPwdChk").val() == '') {
			return ['newPwdChkMsg', '새 비밀번호 확인을 입력해 주세요.'];
		}
		//새 비밀번호와 새 비밀번호 확인 체크
		if ($("#newPwdChk").val() != $("#newPwd").val()) {
			return ['newPwdChkMsg', '비밀번호가 일치하지 않습니다. 다시 입력해주세요'];
		}

		return msg;
	}


	//영문,숫자, 특수문자를 혼합체크
	function fnCheckPwdPattern(pw) {
		var pwPattern3 = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{6,}$/;
		//var pwPattern2 = /^.*(?=.{6,20})(?=.*[0-9])(?=.*[a-zA-Z]).*$/;

		if (pwPattern3.test(pw) && pw.length > 7 && pw.length < 21) {
			return true;
		}
		/*
		else if (pwPattern2.test(pw) && pw.length > 9 && pw.length < 21) {
			return true;
		}*/
		return false;
	}

	//관리자 비밀번호 찾기완료
	function fnGoLogin() {
		$("#pwdChangeForm").css("display", "none");
		$("#pwdFinishForm").css("display", "none");
		$("#loginForm").css("display", "block");
	}

	//쿠키값 Set
	function setCookie(cookieName, value, exdays, secure) {
		var exdate = new Date();
		exdate.setDate(exdate.getDate() + exdays);
		var cookieValue = escape(value) + ((exdays == null) ? "" : "; expires=" + exdate.toGMTString());
		if (secure == true) {
			cookieValue += "; secure"
		}
		document.cookie = cookieName + "=" + cookieValue;
	}

	//쿠키값 Delete
	function deleteCookie(cookieName) {
		var expireDate = new Date();
		expireDate.setDate(expireDate.getDate() - 1);
		document.cookie = cookieName + "= " + "; expires=" + expireDate.toGMTString();
	}

	//쿠키값 가져오기
	function getCookie(cookie_name) {
		var x, y;
		var val = document.cookie.split(';');

		for (var i = 0; i < val.length; i++) {
			x = val[i].substr(0, val[i].indexOf('='));
			y = val[i].substr(val[i].indexOf('=') + 1);
			x = x.replace(/^\s+|\s+$/g, ''); // 앞과 뒤의 공백 제거하기

			if (x == cookie_name) {
				return unescape(y); // unescape로 디코딩 후 값 리턴
			}
		}
	}

	//login
	function fnTwoFactorAuth() {
		$.ajax({
			url: "/admin/login/bosTwoFactorAuthetificationVeriyfy",
			data: { "authCertiNo": $('#authCertiNo').val() },
			type: 'POST',
			dataType: 'json',
			error: function (xhr, status, strError) {
			},
			success:
					function (data) {
						var chkVal = data.code;
						switch (chkVal) {
							case "BOS_TWO_FACTOR_AUTH_SUCCESS":
								fnMessage(data.message);
								location.href = 'layout.html#/dashboardTot';
								break;
							case "BOS_TWO_FACTOR_AUTH_FAIL": // 이차인증 실패
								fnMessage(data.message);
								break;
							case "BOS_TWO_FACTOR_AUTH_FIVE_FAIL":
								fnMessage(data.message);
								location.href = 'admVerify.html';
								break;
							default:
								fnMessage(data.message);
								break;
						}

					}
		});
	}

	function maxLengthCheck(object){
		if (object.value.length > object.maxLength){
			object.value = object.value.slice(0, object.maxLength);
		}
	}
</script>