(function(e){function t(t){for(var r,i,o=t[0],u=t[1],l=t[2],p=0,_=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&_.push(s[i][0]),s[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(_.length)_.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var u=a[o];0!==s[u]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={"any/user/employee-auth/index":0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;n.push([8,"chunk-commons"]),a()})({"0b65":function(e,t,a){"use strict";var r=a("4ecf"),s=a.n(r);s.a},"4ecf":function(e,t,a){},"51f7":function(e,t,a){"use strict";a.r(t);var r=a("5530"),s=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fb__employee-auth",class:"employee-auth-"+e.platform},[a("div",{staticClass:"employee-auth"},[a("div",{staticClass:"employee-auth__box"},["desktop"===e.platform?[a("a",{attrs:{href:"/"}},[a("img",{staticClass:"employee-auth__logo",attrs:{src:e.$APP_CONFIG.IMAGES.LOGO,alt:"#풀무원"}})])]:e.isMobile?[a("fb-mobile-header",{attrs:{title:e.header.title,buttons:e.header.buttons,actions:e.header.actions},on:{"handle-back":function(t){return e.handleBack(t)}}})]:e._e(),1===e.step?a("section",{staticClass:"employee-auth__container"},[e.isDesktop?a("h2",{staticClass:"employee-auth__title employee-auth__title--step-1"},[e._v("풀무원 임직원 인증")]):e._e(),a("p",{staticClass:"employee-auth__desc"},[e._v("#풀무원 회원 아이디와 비밀번호를 "),e.isMobile?a("br"):e._e(),e._v("입력하셔서 로그인을 해 주세요")]),a("div",{staticClass:"employee-auth__step__wrapper"},[a("ol",{staticClass:"employee-auth__step__area"},e._l(e.stepTitles,(function(t,r){return a("li",{key:"step-title-"+r,staticClass:"employee-auth__step",class:r+1===e.step?"employee-auth__step--active":""},[a("span",{staticClass:"employee-auth__step__name",domProps:{innerHTML:e._s(t)}})])})),0)]),a("sign-in",{staticClass:"employee-auth__wrapper",attrs:{type:e.$FB_CODES.SIGN_IN.TYPE_EMPLOYEE_AUTH},on:{"sign-in-finished":function(t){return e.handleSignInFinished(t)},"sign-in-error":function(t){return e.handleSignInError(t)}}})],1):a("div",{staticClass:"employee-auth__inner"},[2===e.step?a("section",{staticClass:"employee-auth__container"},[e.isDesktop?a("h2",{staticClass:"employee-auth__title"},[e._v("풀무원 임직원 인증")]):e._e(),a("p",{staticClass:"employee-auth__desc"},[e._v("풀무원 임직원 인증을 위해 임직원 이메일 또는 이름과 사번을 입력해주세요")]),a("div",{staticClass:"employee-auth__step__wrapper"},[a("ol",{staticClass:"employee-auth__step__area"},e._l(e.stepTitles,(function(t,r){return a("li",{key:"step-title-"+r,staticClass:"employee-auth__step",class:r+1===e.step?"employee-auth__step--active":""},[a("span",{staticClass:"employee-auth__step__name",domProps:{innerHTML:e._s(t)}})])})),0)]),a("form",{staticClass:"employee-auth__wrapper",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("div",{staticClass:"fb__input-text line"},[a("label",{staticClass:"fb__input-text__inner"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"},{name:"fb-validate",rawName:"v-fb-validate:step2.focus.realtime",value:e.user.email,expression:"user.email",arg:"step2",modifiers:{focus:!0,realtime:!0}}],ref:"email",attrs:{type:"email",autocomplete:"email",placeholder:"임직원 이메일 또는 이름을 입력해 주세요",tabindex:"0","fb-validate-info":"email"},domProps:{value:e.user.email},on:{"fb-validate":function(t){return e.handelValidatorRealtime(t,"email")},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault(),e.user.email&&e.$refs["job-number"].focus()},input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),e.user.email&&e.user.email.length?a("button",{staticClass:"fb__input-text__clear",attrs:{type:"button",tabindex:"-1"},on:{click:function(t){e.user.email=null}}},[e._v("지우기")]):e._e()]),null!==e.userValidateState.email&&e.$FB_CODES.VALIDATE.SUCCESS!==e.userValidateState.email?a("span",{staticClass:"fb__required__error"},[e._v(e._s(e.userValidateNoti.email[e.userValidateState.email]))]):e._e()]),a("div",{staticClass:"fb__input-text line"},[a("label",{staticClass:"fb__input-text__inner"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.jobNumber,expression:"user.jobNumber"},{name:"fb-validate",rawName:"v-fb-validate:step2.focus",value:e.user.jobNumber,expression:"user.jobNumber",arg:"step2",modifiers:{focus:!0}}],ref:"job-number",attrs:{type:"text",placeholder:"사번을 입력해 주세요",tabindex:"0","fb-validate-info":"jobNumber"},domProps:{value:e.user.jobNumber},on:{input:function(t){t.target.composing||e.$set(e.user,"jobNumber",t.target.value)}}}),a("div",{staticClass:"fb__input-text__btns"},[e.user.jobNumber&&e.user.jobNumber.length?a("button",{staticClass:"fb__input-text__clear",attrs:{type:"button",tabindex:"-1"},on:{click:function(t){e.user.jobNumber=null}}},[e._v("지우기")]):e._e()])]),e.user.jobNumber||null===e.userValidateState.jobNumber?e._e():a("span",{staticClass:"fb__required__error"},[e._v(e._s(e.userValidateNoti.jobNumber[e.userValidateState.jobNumber]))])]),a("button",{staticClass:"fb__btn-margin--green employee-auth__submit",attrs:{type:"submit",tabindex:"0",disabled:e.$FB_CODES.PROCESSES.ING===e.processes.signIn}},[e._v(" 임직원 인증 이메일/SMS 발송 ")])])]):3===e.step?a("section",{staticClass:"employee-auth__container"},[e.isDesktop?a("h2",{staticClass:"employee-auth__title"},[e._v("풀무원 임직원 인증")]):e._e(),a("p",{staticClass:"employee-auth__desc employee-auth__desc--auth"},[a("em",[e._v(" 입력하신 이메일과 임직원 정보에 등록된 휴대폰으로"),a("br"),e._v(" 인증 코드를 발송했습니다."),a("br"),e._v(" 휴대폰과 이메일로 발송된 인증코드를 확인 후 "),e.isMobile?a("br"):e._e(),e._v("입력해 주세요."),a("br"),e._v(" 이메일 발송에는 최대 5분이 소요될 수 있습니다. ")])]),a("div",{staticClass:"employee-auth__step__wrapper"},[a("ol",{staticClass:"employee-auth__step__area"},e._l(e.stepTitles,(function(t,r){return a("li",{key:"step-title-"+r,staticClass:"employee-auth__step",class:r+1===e.step?"employee-auth__step--active":""},[a("span",{staticClass:"employee-auth__step__name",domProps:{innerHTML:e._s(t)}})])})),0)]),a("form",{staticClass:"employee-auth__wrapper",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[a("div",{staticClass:"fb__input-text line"},[a("label",{staticClass:"fb__input-text__inner"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.authCode,expression:"user.authCode"},{name:"fb-validate",rawName:"v-fb-validate:step3.focus",value:e.user.authCode,expression:"user.authCode",arg:"step3",modifiers:{focus:!0}}],ref:"auth-code",attrs:{type:"text",autocomplete:"one-time-code",placeholder:"인증코드 6자리를 입력해주세요",maxlength:"6",tabindex:"0","fb-validate-info":"authCode"},domProps:{value:e.user.authCode},on:{input:function(t){t.target.composing||e.$set(e.user,"authCode",t.target.value)}}}),e.user.authCode&&e.user.authCode.length?a("button",{staticClass:"fb__input-text__clear",attrs:{type:"button",tabindex:"-1"},on:{click:function(t){e.user.authCode=null}}},[e._v("지우기")]):e._e()]),e.user.authCode||null===e.userValidateState.authCode?e._e():a("span",{staticClass:"fb__required__error"},[e._v(e._s(e.userValidateNoti.authCode[e.userValidateState.authCode]))])]),a("button",{staticClass:"fb__btn-margin--green employee-auth__submit",attrs:{type:"submit",tabindex:"0",disabled:e.$FB_CODES.PROCESSES.ING===e.processes.signIn}},[e._v(" 확인 ")])])]):e._e()])],2)]),a("desktop"===e.platform?"fb-desktop-alert":"fb-mobile-alert",{tag:"component",attrs:{message:e.alert.message,open:e.alert.open},on:{"close-alert":function(t){return e.closeAlert(t)}}})],1)}),n=[],i=(a("a623"),a("caad"),a("2532"),a("ade3")),o=(a("96cf"),a("1da1")),u=a("93d6"),l=a("e173"),c=a("1891"),p=a("e096"),_=a("9d0b"),m=a("863d"),b=a("face"),h=a("2479"),d=a("8e32"),f=a("479c"),E={name:"employee-auth",mixins:[l["a"],c["a"]],components:{VueRecaptcha:p["default"],fbDesktopAlert:_["a"],fbDesktopModal:m["a"],fbMobileAlert:b["a"],fbMobileModal:h["a"],fbMobileHeader:d["a"],signIn:f["a"]},data:function(){return{header:{title:"풀무원 임직원 인증",buttons:["back"],actions:[]},processes:{signIn:this.$FB_CODES.PROCESSES.WAIT,sendEmployeeAuthEmail:this.$FB_CODES.PROCESSES.WAIT},step:1,stepTitles:["<em>1</em>#풀무원<br>회원인증","<em>2</em>임직원인증","<em>3</em>이메일<br>SMS인증","<em>4</em>인증완료"]}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:location.pathname==e.$APP_CONFIG.PAGE_URL.WELCOME_LOGIN_AUTH&&(e.step=2),e.setUserItems(["email","jobNumber","authCode"]),e.userValidateNoti.email[e.$FB_CODES.VALIDATE.EMPTY]="이메일 또는 이름을 입력해 주세요.",e.userValidateNoti.jobNumber=Object(i["a"])({},e.$FB_CODES.VALIDATE.EMPTY,"사번을 입력해 주세요."),e.userValidateNoti.authCode=Object(i["a"])({},e.$FB_CODES.VALIDATE.EMPTY,"인증코드를 입력해 주세요.");case 5:case"end":return t.stop()}}),t)})))()},methods:{requestSendEmployeeAuthEmail:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$FB_CODES.PROCESSES.ING!==e.processes.signIn){t.next=3;break}throw new Error(e.$FB_MESSAGES.PROCESSES.ING);case 3:if(e.processes.signIn=e.$FB_CODES.PROCESSES.ING,a=e.user,r={email:a.email,urErpEmployeeCode:a.jobNumber},location.pathname!=e.$APP_CONFIG.PAGE_URL.WELCOME_LOGIN_AUTH){t.next=12;break}return t.next=9,u["a"].welcomeLoginSendEmployeeAuthEmail(r);case 9:return t.abrupt("return",t.sent);case 12:return t.next=14,u["a"].sendEmployeeAuthEmail(r);case 14:return t.abrupt("return",t.sent);case 15:t.next=20;break;case 17:throw t.prev=17,t.t0=t["catch"](0),t.t0;case 20:return t.prev=20,e.processes.signIn=e.$FB_CODES.PROCESSES.WAIT,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,17,20,23]])})))()},requestEmployeeAuthCodeAuth:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$FB_CODES.PROCESSES.ING!==e.processes.signIn){t.next=3;break}throw new Error(e.$FB_MESSAGES.PROCESSES.ING);case 3:if(e.processes.signIn=e.$FB_CODES.PROCESSES.ING,a=e.user,r={certificationCode:a.authCode},location.pathname!=e.$APP_CONFIG.PAGE_URL.WELCOME_LOGIN_AUTH){t.next=12;break}return t.next=9,u["a"].welcomeLoginEmployeeAuthCodeAuth(r);case 9:return t.abrupt("return",t.sent);case 12:return t.next=14,u["a"].employeeAuthCodeAuth(r);case 14:return t.abrupt("return",t.sent);case 15:t.next=20;break;case 17:throw t.prev=17,t.t0=t["catch"](0),t.t0;case 20:return t.prev=20,e.processes.signIn=e.$FB_CODES.PROCESSES.WAIT,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[0,17,20,23]])})))()},resetPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.step=e,this.user.authCode=null,1===e&&(this.user.email=null,this.user.jobNumber=null)},closeAlert:function(e){var t=this.alert;t&&("completed"===t.type&&(this.staffAuthComplete(),window.location.href="/"),this.resetAlert())},nextStep:function(){3===this.step?this.openAlert(this.$FB_MESSAGES.SYSTEM.ALERT_192,{type:"completed"}):this.step++},prevStep:function(){1<this.step&&this.step--},checkSignInInfo:function(){var e="step".concat(this.step),t=this.$fbValidator.validate(),a=t.fails[e],r=t.successes[e];if(Array.isArray(a)&&a.length)for(var s=0,n=a.length;s<n;s++){var i=a[s].info,o=a[s].value,u=a[s].regexPasses;this.has.call(this.userValidateState,i)&&(o?Array.isArray(u)&&u.length&&!u.every((function(e){return e.pass}))?this.userValidateState[i]=this.$FB_CODES.VALIDATE.REGEX:this.userValidateState[i]=this.$FB_CODES.VALIDATE.FAIL:this.userValidateState[i]=this.$FB_CODES.VALIDATE.EMPTY)}if(Array.isArray(r)&&r.length)for(var l=0,c=r.length;l<c;l++)r[l].info;return t.passes[e]},submit:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.checkSignInInfo()){e.next=3;break}return e.abrupt("return");case 3:a=null,e.t0=t.step,e.next=2===e.t0?7:3===e.t0?11:15;break;case 7:return e.next=9,t.requestSendEmployeeAuthEmail();case 9:return a=e.sent,e.abrupt("break",15);case 11:return e.next=13,t.requestEmployeeAuthCodeAuth();case 13:return a=e.sent,e.abrupt("break",15);case 15:if(!a){e.next=19;break}t.nextStep(),e.next=20;break;case 19:throw new Error(t.$FB_MESSAGES.ERROR.DEFAULT);case 20:e.next=44;break;case 22:e.prev=22,e.t1=e["catch"](0),console.error("submit error...",e.t1),e.t2=e.t1.code,e.next=e.t2===t.$FB_CODES.API.SIGN_IN_REQUIRED_TYPE_NUMBER?28:e.t2===t.$FB_CODES.API.SIGN_IN_FAILED?31:e.t2===t.$FB_CODES.API.ALREADY_AUTH_EMPLOYEE_ACCOUNT?33:e.t2===t.$FB_CODES.API.INVALID_AUTH_CODE?35:e.t2===t.$FB_CODES.API.CONTINUOUS_AUTH_CODE_FAILED?37:e.t2===t.$FB_CODES.API.EMPLOYEE_NOT_FOUND?40:42;break;case 28:return t.openAlert(t.$FB_MESSAGES.ERROR.SIGN_IN_REQUIRED),t.resetPage(),e.abrupt("break",44);case 31:return t.openAlert(t.$FB_MESSAGES.SYSTEM.ALERT_01),e.abrupt("break",44);case 33:return t.openAlert(t.$FB_MESSAGES.SYSTEM.ALERT_190),e.abrupt("break",44);case 35:return t.openAlert(t.$FB_MESSAGES.SYSTEM.ALERT_193),e.abrupt("break",44);case 37:return t.openAlert(t.$FB_MESSAGES.SYSTEM.ALERT_194),t.resetPage(2),e.abrupt("break",44);case 40:return t.openAlert(t.$FB_MESSAGES.ERROR.EMPLOYEE_NOT_FOUND),e.abrupt("break",44);case 42:return t.openAlert(e.t1.message||t.$FB_MESSAGES.ERROR.DEFAULT),e.abrupt("break",44);case 44:case"end":return e.stop()}}),e,null,[[0,22]])})))()},handelValidatorRealtime:function(e,t){if(this.userItems.includes(t)&&this.has.call(this.userValidateState,t)){var a=null;switch(t){case"email":a=this.user.email,this.userValidateState.email&&(this.userValidateState.email=a?this.$FB_CODES.VALIDATE.SUCCESS:this.$FB_CODES.VALIDATE.EMPTY);break;default:console.warn("not allowed type...",t);break}}},handleSignInFinished:function(e){this.nextStep()},handleSignInError:function(e){this.openAlert(this.$FB_MESSAGES.ERROR.DEFAULT)}}},S=E,C=(a("0b65"),a("2877")),v=Object(C["a"])(S,s,n,!1,null,null,null),A=v.exports,y=a("633d"),O=a("79a5");y["a"].use(O["a"]),y["c"].components=Object(r["a"])({App:A},y["c"].components),y["d"].dispatch("init").then((function(){return new y["a"](y["c"])}))},8:function(e,t,a){e.exports=a("51f7")}});