<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.pulmuone.v1.comm.mappers.batch.master.customer.CustomerQnaBatchMapper">

    <!--───────────────────────────────────────────────────────────────────────
     * description 		: 문의 지연 대상 조회
     * @
     * @ 수정일			수정자          수정내용
     * @ ──────────────────────────────────────────────────────────────────────
     * @ 2020.11.25		이원호          최초생성
     * @
    ────────────────────────────────────────────────────────────────────────-->
    <select id="getCustomerQna" resultType="long">
        /* customerQnaBatch.getCustomerQna */
        SELECT CS_QNA_ID
        FROM CS_QNA cq
        WHERE STATUS = 'QNA_STATUS.RECEPTION'
            AND DELAY_YN = 'N'
            AND CREATE_DT <![CDATA[ < ]]> DATE(NOW())
    </select>

    <!--───────────────────────────────────────────────────────────────────────
     * description 		: 문의 지연 처리
     * @
     * @ 수정일			수정자          수정내용
     * @ ──────────────────────────────────────────────────────────────────────
     * @ 2020.11.25		이원호          최초생성
     * @
    ────────────────────────────────────────────────────────────────────────-->
    <update id="putCustomerQnaDelay">
        /* customerQnaBatch.putCustomerQnaDelay */
        UPDATE CS_QNA
        SET DELAY_YN = 'Y'
        WHERE CS_QNA_ID = #{csQnaId}
    </update>
</mapper>


