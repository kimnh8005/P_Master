<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.pulmuone.v1.comm.mappers.slaveErp.user.employee.PulmuoneEmployeeMapper">

    <!--───────────────────────────────────────────────────────────────────────
     * description      : ERP 임직원 연동 조회
     * @
     * @ 수정일         수정자          수정내용
     * @ ──────────────────────────────────────────────────────────────────────
     * @ 2020.09.17     손진구          최초생성
     * @
    ────────────────────────────────────────────────────────────────────────-->
    <resultMap id="getErpEmployeeListResultMap" type="kr.co.pulmuone.v1.user.employee.dto.vo.ErpEmployeeVo">
        <result column="ERP_EMPLOYEE_NUMBER" property="erpEmployeeNumber" />
        <result column="ERP_EMPLOYEE_NAME" property="erpEmployeeName" />
        <result column="ERP_CELL_PHONE" property="erpCellPhone" />
        <result column="ERP_EMAIL" property="erpEmail" />
        <result column="ERP_REGAL_CODE" property="erpRegalCode" />
        <result column="ERP_REGAL_NAME" property="erpRegalName" />
        <result column="ERP_ORGANIZATION_CODE" property="erpOrganizationCode" />
        <result column="ERP_ORGANIZATION_NAME" property="erpOrganizationName" />
        <result column="ERP_GRADE_CODE" property="erpGradeCode" />
        <result column="ERP_GRADE_NAME" property="erpGradeName" />
        <result column="ERP_POSITION_NAME" property="erpPositionName" />
        <result column="ERP_STATUS_NAME" property="erpStatusName" />
        <result column="FIN_REGAL_CD" property="finRegalCd" />
        <result column="FIN_ORGANIZATION_CD" property="finOrganizationCd" />
        <result column="FIN_ACCOUNT_CD" property="finAccountCd" />
        <result column="SOB" property="sob" />
        <result column="OU_ID" property="ouId" />
        <result column="OU_NAME" property="ouName" />
    </resultMap>

    <!-- ERP 임직원 연동 조회 -->
    <select id="getErpEmployeeList" resultMap="getErpEmployeeListResultMap">
        /* pulmuoneEmployee.getErpEmployeeList */
        SELECT EMPLOYEE_NUMBER AS ERP_EMPLOYEE_NUMBER /* 사번 */
             , KR_NAME AS ERP_EMPLOYEE_NAME /* 직원명 */
             , PHONE_NUMBER AS ERP_CELL_PHONE /* 휴대폰 */
             , EMAIL_ADDRESS AS ERP_EMAIL /* 이메일 */
             , REGAL_ID AS ERP_REGAL_CODE /* 법인코드 */
             , REGAL_NAME AS ERP_REGAL_NAME /* 법인명 */
             , ORGANIZATGION_ID AS ERP_ORGANIZATION_CODE /* 조직코드 */
             , ORGANIZAGTION_NAME AS ERP_ORGANIZATION_NAME /* 조직명 */
             , GRADE_ID AS ERP_GRADE_CODE /* 직급코드 */
             , GRADE_NAME AS ERP_GRADE_NAME /* 직급명 */
             , POSITION_NAME AS ERP_POSITION_NAME /* 직책명 */
             , USER_STATUS AS ERP_STATUS_NAME /* ERP 상태명 */
             , FIN_REGAL_CD AS FIN_REGAL_CD /* 회계 법인코 */
             , FIN_ORGANIZATION_CD AS FIN_ORGANIZATION_CD /* 회계 부서코드 */
             , FIN_ACCOUNT_CD AS FIN_ACCOUNT_CD /* 계정과목코드 */
             , SOB AS SOB /* ERP 장부 ID */
             , OU_ID AS OU_ID /* OU ID */
             , OU_NAME AS OU_NAME /* OU 명 */
          FROM APPS.XHR_ONLINE_EMP_V
    </select>

    <!--───────────────────────────────────────────────────────────────────────
     * description      : ERP 조직정보 연동 조회
     * @
     * @ 수정일         수정자          수정내용
     * @ ──────────────────────────────────────────────────────────────────────
     * @ 2020.09.17     손진구          최초생성
     * @
    ────────────────────────────────────────────────────────────────────────-->
    <resultMap id="getErpOrganizationListResultMap" type="kr.co.pulmuone.v1.user.employee.dto.vo.ErpOrganizationVo">
        <result column="ERP_ORGANIZATION_CODE" property="erpOrganizationCode" />
        <result column="ERP_ORGANIZATION_NAME" property="erpOrganizationName" />
        <result column="ERP_REGAL_CODE" property="erpRegalCode" />
        <result column="ERP_REGAL_NAME" property="erpRegalName" />
    </resultMap>

    <!-- ERP 조직정보 연동 조회 -->
    <select id="getErpOrganizationList" resultMap="getErpOrganizationListResultMap">
        /* pulmuoneEmployee.getErpOrganizationList */
        SELECT ORGANIZATGION_ID AS ERP_ORGANIZATION_CODE /* 조직코드 */
             , ORGANIZAGTION_NAME AS ERP_ORGANIZATION_NAME /* 조직명 */
             , REGAL_ID AS ERP_REGAL_CODE /* 법인코드 */
             , REGAL_NAME AS ERP_REGAL_NAME /* 법인명 */
          FROM APPS.XHR_ONLINE_EMP_V
      GROUP BY ORGANIZATGION_ID, ORGANIZAGTION_NAME, REGAL_ID, REGAL_NAME
        HAVING ORGANIZATGION_ID IS NOT NULL
           AND ORGANIZAGTION_NAME IS NOT NULL
           AND REGAL_ID IS NOT NULL
           AND REGAL_NAME IS NOT NULL
      ORDER BY ORGANIZATGION_ID, REGAL_ID
    </select>

    <!--───────────────────────────────────────────────────────────────────────
     * description      : ERP 법인정보 연동 조회
     * @
     * @ 수정일         수정자          수정내용
     * @ ──────────────────────────────────────────────────────────────────────
     * @ 2020.09.17     손진구          최초생성
     * @
    ────────────────────────────────────────────────────────────────────────-->
    <resultMap id="getErpRegalListResultMap" type="kr.co.pulmuone.v1.user.employee.dto.vo.ErpRegalVo">
        <result column="ERP_REGAL_CODE" property="erpRegalCode" />
        <result column="ERP_REGAL_NAME" property="erpRegalName" />
    </resultMap>

    <!-- ERP 법인정보 연동 조회 -->
    <select id="getErpRegalList" resultMap="getErpRegalListResultMap">
        /* pulmuoneEmployee.getErpRegalList */
        SELECT REGAL_ID AS ERP_REGAL_CODE /* 법인코드 */
             , REGAL_NAME AS ERP_REGAL_NAME /* 법인명 */
          FROM APPS.XHR_ONLINE_EMP_V
      GROUP BY REGAL_ID, REGAL_NAME
        HAVING REGAL_ID IS NOT NULL
           AND REGAL_NAME IS NOT NULL
      ORDER BY REGAL_ID
    </select>

</mapper>

