<div class="wrap-location" style="width: 900px">
  <h1 class="title">적립금 등록</h1>
</div>

<!-- 팝업 레이어1 -->
<div id="layer1" class="fb__layerPopup">
  <div class="fb__sect" style="width: 900px">
    <form id="inputForm" class="inputForm" name="inputForm" method="post" enctype="multipart/form-data">
      <table class="datatable v-type">
        <colgroup>
          <col width="25%" />
          <col width="*" />
        </colgroup>
        <tbody>
          <!-- 적립금 설정 -->
          <tr>
            <th scope="row">
              <label class="req-star-back" for="reserveType">적립금 설정</label>
            </th>
            <td>
              <div class="complex-condition">
                <span id="reserveType" class="fb__custom__radio"></span>
                <!-- 자동지급 구분 선택 - 자동지급 -->
                <div class="target-autoIssue-cell marginT10">
                  <input id="autoIssueSelect" name="autoIssueSelect" class="fb__custom__select" type="text"
                    value="추후 셀렉트박스로" style="width: 300px;">
                </div>
              </div>
            </td>
          </tr>
          <!-- 적립금 명 -->
          <tr>
            <th scope="row">
              <label for="reserveName" class="req-star-back">적립금 명</label>
            </th>
            <td>
              <div class="complex-condition">
                <input type="text" id="reserveName" name="reserveName" class="comm-input width100" required />
              </div>
            </td>
          </tr>
          <!-- 기간 -->
          <tr>
            <th scope="row">
              <label class="req-star-back">기간</label>
            </th>
            <td>
              <div class="complex-condition">
                <div class="datepicker-wrapper startdate-wrapper" style="width: 140px">
                  <input type="text" id="startDate" class="datepicker-input" name="startDate" required />
                </div>
                <div class="datepicker-wrapper" style="width: 140px">
                  <input type="text" id="endDate" class="datepicker-input" name="endDate" required />
                </div>
              </div>
            </td>
          </tr>
          <!-- 분담조직 -->
          <tr>
            <th>
              <label for="firstErpOrganizationName">분담조직</label>
            </th>
            <td>
              <div class="complex-condition">
                <input id="firstErpOrganizationCode" class="comm-input" name="firstErpOrganizationCode" type="hidden">
                <input id="firstErpOrganizationName" class="comm-input disabled" name="firstErpOrganizationName"
                  type="text" style="width:400px;">
                <button id='fnDeptPopupButtonFirst' class="fb__search-btn marginL10" type="button"
                  onClick="$scope.fnDeptPopupButton('first')"></button>
              </div>
            </td>
          </tr>
          <!-- 지급예산 -->
          <tr>
            <th>
              <label for="issueBudget" class="req-star-back">
                지급예산
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <input type="text" id="issueBudget" class="comm-input marginR5" name="issueBudget" style="width:140px;"
                  data-validate-title="지급예산 체크 제목" data-validate-message="지급예산 체크 메시지" required>
                <span class="font--bold font--larger middle">원</span>
              </div>
            </td>
          </tr>
          <!-- 지급 수량 제한 -->
          <tr>
            <th>
              <label for="issueQtyLimit" class="req-star-back">지급 수량 제한</label>
            </th>
            <td>
              <div class="complex-condition">
                <span id="issueQtyYN" class="fb__custom__radio marginR10"></span>
                <div class="inlineBlock">
                  <span class="font--bold font--larger marginR10"> : </span>
                  <select id="issueQtyLimit" class="fb__custom__select" name="issueQtyLimit" style="width: 70px;">
                    <option value="">선태해주세요</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                  </select>
                  <span class="font--bold middle">건(계정당)</span>
                  <span class="middle font--smaller">*최대 10장까지만 선택 가능합니다.</span>
                </div>
              </div>
            </td>
          </tr>

          <!-- 적립구분 - 관리자 지급 -->
          <tr class="target-manager-row">
            <th>
              <label for="reserveKind" class="req-star-back">
                적립 구분
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <input type="text" id="reserveKind" class="comm-input fb__custom__select" name="reserveKind"
                  value="추후 셀렉트박스로" style="width : 140px;">
                <div class="inlineBlock marginL20">
                  <span>지급일로부터</span>
                  <input type="text" id="" class="" name="" value="" style="width : 70px;">일
                </div>
              </div>
            </td>
          </tr>
          <!-- 적립 상세구분 - 관리자 지급 -->
          <tr class="target-manager-row">
            <th>
              <label for="reserveKindDetail" class="req-star-back">
                적립 상세구분
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <input type="text" id="reserveKindDetail" class="comm-input fb__custom__select" name="reserveKindDetail"
                  value="추후 셀렉트박스로" style="width : 140px;">
              </div>
            </td>
          </tr>

          <!-- 적립금 -->
          <tr>
            <th>
              <label for="reserveValue" class="req-star-back">
                적립금
              </label>
            </th>
            <td>
              <!-- NOTE 적립금 : 이용권 & 자동발급 -->
              <div class="complex-condition target-ticket-cell target-autoIssue-cell">
                <input type="text" id="reserveValue_default" class="comm-input marginR5" name="reserveValue_default"
                  style="width:140px;" required>
                <span class="font--bold font--larger middle">원</span>
              </div>
              <!-- NOTE 적립금 : 후기 -->
              <div class="complex-condition target-feedback-cell">
                <div id="normal-feedback" class="flexBox marginB5">
                  <div class="marginR10">
                    <span class="inlineBlock middle font--bold" style="width : 80px;">일반후기 :</span>
                    <input type="text" id="" class="" name="" value="">원
                  </div>
                  <div>
                    <span>지급일로부터</span>
                    <input type="text" id="" class="" name="" value="">일
                  </div>
                </div>
                <div id="photo-feedback" class="flexBox marginB5">
                  <div class="marginR10">
                    <span class="inlineBlock middle font--bold" style="width : 80px;">포토후기 :</span>
                    <input type="text" id="" class="" name="" value="">원
                  </div>
                  <div>
                    <span>지급일로부터</span>
                    <input type="text" id="" class="" name="" value="">일
                  </div>
                </div>
                <div id="premium-feedback" class="flexBox">
                  <div class="marginR10">
                    <span class="inlineBlock middle font--bold" style="width : 80px;">프리미엄후기 :</span>
                    <input type="text" id="" class="" name="" value="">원
                  </div>
                  <div>
                    <span>지급일로부터</span>
                    <input type="text" id="" class="" name="" value="">일
                  </div>
                </div>
              </div>
            </td>
          </tr>

          <!-- 회원설정 - 관리자 지급 -->
          <tr class="target-manager-row">
            <th>
              <label for="" class="req-star-back">
                회원 설정
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <div class="flexBox">
                  <!-- 회원설정 선택 셀렉트박스 -->
                  <input id="memberSetting" class="comm-input marginR10 fb__custom__select" name="memberSetting"
                    type="text" value="추후 셀렉트박스로" style="width : 160px;">
                  <button id="memberSetting-excelBtn" type="button" class="btn-s btn-blue middle">엑셀업로드</button>
                </div>
              </div>
            </td>
          </tr>

          <!-- 지급/차감 사유 - 관리자 지급 -->
          <tr class="target-manager-row">
            <th>
              <label class="req-star-back">
                지급/차감 사유
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <div class="flexBox">
                  <!-- 지급/차감 사유 선택 셀렉트박스 -->
                  <input id="issueReasonType" class="comm-input marginR10 fb__custom__select" name="issueReasonType"
                    type="text" value="추후 셀렉트박스로" style="width : 160px;">
                  <!-- 지급/차감 상세 사유 -->
                  <textarea id="issueReason" class="comm-textarea" rows="1" name="issueReason" type="text"
                    value=""></textarea>
                </div>
              </div>
            </td>
          </tr>

          <!-- 지급 기준 - 후기 -->
          <tr>
            <th>
              <label for="issueDayCount" class="req-star-back">
                지급기준
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <span class="middle marginR10">작성일로부터</span>
                <input type="text" id="issueDayCount" class="comm-input marginR5" name="issueDayCount"
                  style="width:70px;" required>
                <span class="font--bold middle">일 후 지급</span>
              </div>
            </td>
          </tr>
          <!-- 회원등급별 차등 - 후기 -->
          <tr class="target-feedback-row">
            <th>
              <label for="" class="req-star-back">
                회원등급별 차등
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <div class="flexBox marginB10">
                  <!-- 회원등급 선택 셀렉트박스 -->
                  <input id="memberLv" class="comm-input marginR10 fb__custom__select" name="memberLv" type="text"
                    value="추후 셀렉트박스로" style="width : 160px;">
                  <button id="memberLv-addBtn" type="button" class="btn-s btn-point middle">추가</button>
                </div>
                <!-- NOTE 회원등급별 차등 - 테이블 영역1 - 우수회원 -->
                <div class="datatable-inner-wrapper">
                  <table class="datatable v-typea datatable-inner">
                    <colgroup>
                      <col width="20%">
                      <col width="50%">
                      <col width="10%">
                    </colgroup>
                    <thead>
                      <tr>
                        <th>회원등급</th>
                        <th>적립금/유효기간</th>
                        <th>관리</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          우수회원
                        </td>
                        <td>
                          <div class="complex-condition">
                            <div id="" class="flexBox marginB5">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  일반후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                            <div id="" class="flexBox marginB5">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  포토후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                            <div id="" class="flexBox">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  프리미엄후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                          </div>
                        </td>
                        <td>
                          <button type="button" class="btn-s btn-point">해제</button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- NOTE 회원등급별 차등 - 테이블 영역1 - 일반회원 -->
                <div class="datatable-inner-wrapper">
                  <table class="datatable v-typea datatable-inner">
                    <colgroup>
                      <col width="20%">
                      <col width="50%">
                      <col width="10%">
                    </colgroup>
                    <thead>
                      <tr>
                        <th>회원등급</th>
                        <th>적립금/유효기간</th>
                        <th>관리</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          일반회원
                        </td>
                        <td>
                          <div class="complex-condition">
                            <div id="" class="flexBox marginB5">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  일반후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                            <div id="" class="flexBox marginB5">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  포토후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                            <div id="" class="flexBox">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  프리미엄후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                          </div>
                        </td>
                        <td>
                          <button type="button" class="btn-s btn-point">해제</button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- NOTE 회원등급별 차등 - 테이블 영역1 - 프리미엄 회원 -->
                <div class="datatable-inner-wrapper">
                  <table class="datatable v-typea datatable-inner">
                    <colgroup>
                      <col width="20%">
                      <col width="50%">
                      <col width="10%">
                    </colgroup>
                    <thead>
                      <tr>
                        <th>회원등급</th>
                        <th>적립금/유효기간</th>
                        <th>관리</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          프리미엄 회원
                        </td>
                        <td>
                          <div class="complex-condition">
                            <div id="" class="flexBox marginB5">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  일반후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                            <div id="" class="flexBox marginB5">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  포토후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                            <div id="" class="flexBox">
                              <div class="marginR10">
                                <span class="inlineBlock middle font--bold font--smaller textLeft"
                                  style="width : 75px;">
                                  프리미엄후기 :</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">원
                              </div>
                              <div>
                                <span>지급일로부터</span>
                                <input type="text" id="" class="" name="" value="" style="width:70px;">일
                              </div>
                            </div>
                          </div>
                        </td>
                        <td>
                          <button type="button" class="btn-s btn-point">해제</button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </td>
          </tr>
          <!-- 유효기간 -->
          <tr>
            <th>
              <label for="validityType" class="req-star-back">
                유효기간
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <div class="marginB10">
                  <div class="fb__custom__radio inlineBlock marginR20">
                    <label for="validityType_0">
                      <input type="radio" id="validityType_0" name="validityType" value="validity" checked></input>
                      <span>유효일 : </span>
                    </label>
                  </div>
                  <div id="validityType_validity" class="inlineBlock middle">
                    <span class="font--bold middle">등록일로부터</span>
                    <input type="text" id="validityDay" name="validityDay" style="width:100px" maxlength='3'>
                    <span class="font--bold middle">일</span>
                  </div>
                </div>
                <div>
                  <div class="fb__custom__radio inlineBlock marginR20">
                    <label for="validityType_1">
                      <input type="radio" id="validityType_1" name="validityType" value="period"></input>
                      <span>기간설정 : </span>
                    </label>
                  </div>
                  <div id="validityType_period" class="inlineBlock">
                    <input type="text" id="validitDate" name="validitDate" style="width:150px">
                  </div>
                </div>
              </div>
            </td>
          </tr>
          <!-- 생성개수 -->
          <tr>
            <th>
              <label for="reserveCount" class="req-star-back">
                생성개수
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <input type="text" id="reserveCount" class="comm-input marginR5" name="issueBudget" style="width:140px;"
                  required>
                <span class="font--bold font--larger middle">건</span>
              </div>
            </td>
          </tr>
          <!-- 난수생성 -->
          <tr class="target-ticket-row">
            <th>
              <label for="randNumType" class="req-star-back">
                난수생성
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <!-- 셀렉트 박스 -->
                <div class="inlineBlock marginR10">
                  <div class="fb__custom__radio inlineBlock">
                    <label for="randNumType_0">
                      <input type="radio" id="randNumType_0" name="randNumType" value="randNumType_select"
                        checked></input>
                      <span></span>
                    </label>
                  </div>
                  <input id="randNumType_select" class="fb__custom__select" name="randNumType_select" type="text"
                    value="" style="width : 140px;" />
                  <button id="fnTicketExcelUpload" type="button" class="btn-s btn-blue marginL10 middle"
                    style="height: 32px;">
                    파일업로드
                  </button>
                </div>
                <!-- 인풋 -->
                <div class="inlineBlock">
                  <div class="fb__custom__radio inlineBlock">
                    <label for="randNumType_1">
                      <input type="radio" id="randNumType_1" name="randNumType" value="randNumType_code" />
                      <span class="marginR5">단일코드 : </span>
                    </label>
                  </div>
                  <input id="randNumType_code" class="comm-input" name="randNumType_code" type="text" value=""
                    style="width:140px;" maxlength="12" required>
                </div>
              </div>
            </td>
          </tr>
          <!-- 설정상태 -->
          <tr>
            <th>
              <label for="reserveStatus">
                설정상태
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <input type="hidden" name="status" id="status" value="" />
                <input id="statusName" class="comm-input disabled marginR10" name="statusName" type="text"
                  style="width : 160px;">
                <div class="button-wrapper inlineBlock middle marginR10">
                  <button id="fnApprovalRequest" type="button" class="btn-s btn-point"
                    onclick="$scope.fnApprovalRequest()">
                    승인요청
                  </button>
                  <button id="fnCancelRequest" type="button" class="btn-s btn-point" onclick="$scope.fnCancelRequest()">
                    요청철회
                  </button>
                  <button id="fnRejectApproval" type="button" class="btn-s btn-point"
                    onclick="$scope.fnRejectApproval()">
                    승인반려
                  </button>
                  <button id="fnReserveApproval" type="button" class="btn-s btn-point"
                    onclick="$scope.fnReserveApproval()">
                    승인
                  </button>
                  <button id="fnIssueReserveStop" type="button" class="btn-s btn-point"
                    onclick="$scope.fnIssueReserveStop()">
                    지급중지
                  </button>
                  <button id="fnIssueReserve" type="button" class="btn-s btn-point" onclick="$scope.fnIssueReserve()">
                    지급
                  </button>
                </div>
                <div class="comment-wrapper inlineBlock">
                  <span id=" approvalCmntDiv">*승인 지급 가능합니다.</span>
                  <span id="rejectApprovalCmntDiv">*적립금 설정 변경 후 저장 시 승인 요청으로 변경 됩니다.</span>
                  <div class="infoDiv" style="line-height : 1.2">
                    <p id="issuerInfoDiv">
                      <span class="marginR5">
                        지급처리자 : <span>처리자</span>
                      </span>
                      <span id="issueInfoUser">2020-09-15 09:09</span>
                      <span>/</span>
                      <span class="adminName">관리자명(admin)</span>
                    </p>
                    <p id="stopIssueUserInfoDiv">
                      <span class="marginR5">
                        중지처리자 : <span>처리자</span>
                      </span>
                      <span id="stopIssueUserInfo">2020-09-15 09:09</span>
                      <span>/</span>
                      <span class="adminName">관리자명(admin)</span>
                    </p>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          <!-- 등록정보 -->
          <tr>
            <th>
              <label for="reserveInfo">
                등록정보
              </label>
            </th>
            <td>
              <div class="complex-condition">
                <div>
                  <label for="registerDate" class="font--smaller">
                    <span class="inlineBlock marginR10 middle" style="width : 70px;">등록일 : </span>
                    <input type="text" id="registerDate" name="registerDate" class="inlineBlock borderNone" value=""
                      style="width : 400px; height: 24px;">
                  </label>
                </div>
                <div>
                  <label for="modifyDate" class="font--smaller">
                    <span class="inlineBlock marginR10 middle" style="width : 70px;">최근수정일 : </span>
                    <input type="text" id="modifyDate" name="modifyDate" class="inlineBlock borderNone" value=""
                      style="width : 400px; height: 24px;">
                  </label>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <span class="btn-area marginT10 marginB10">
        <button id="fnSave" type="button" class="set-btn-type2">저장</button>
      </span>
      <div id="aprovalCheck" class="textCenter fb__custom__checkbox">
        <label for="approvalCheckbox">
          <input type="checkbox" id="approvalCheckbox" class="fb__custom__checkbox" name="approvalCheckbox"
            onclick="scope.fnCheckRequestApproval()" />
          <span>승인요청 처리</span>
        </label>
      </div>

    </form>
  </div>
</div>




<script>
  $(document).ready(function () {

    /**
     * 직접 rules와 messages를 이용해서 validation 체크 할 태그와 메시지 지정
     * reserveName : 적립금 명 validation 체크 예시
     * 값 입력 여부, 최소 길이 3글자 여부 체크
     * NOTE 인라인으로 validation 메시지, 제목 설정은 지급 예산에 설정해놨습니다.
     */

    const rules = {
      reserveName: {
        required: true,
        minlength: 3,
      }
    };

    //alert 창에 나타날 메시지
    const messages = {
      reserveName: {
        required: "필수값!",
        minlength: "3글자 이상 입력!",
      }
    }

    const $form = $("#inputForm");

    const formObj = fbCustomFormHandler.setup({
      targetForm: $form,
      rules: rules,
      messages: messages,
      ignore: null,
    });

    // $("#issueQtyLimit").on("click", function (e) {
    //   e.stopPropagation();
    // })

    const $fnSave = $("#fnSave");

    $fnSave.on("click", function (e) {
      e.preventDefault();
      formObj.validate();
    })

    // toggleTag([".target-ticket-row", ".target-ticket-cell"], true);
  })

</script>